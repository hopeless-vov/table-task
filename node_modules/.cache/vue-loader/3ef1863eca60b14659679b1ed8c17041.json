{"remainingRequest":"C:\\Users\\Julia\\Desktop\\table-test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Julia\\Desktop\\table-test\\src\\components\\Dialog\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Julia\\Desktop\\table-test\\src\\components\\Dialog\\index.vue","mtime":1639224230000},{"path":"C:\\Users\\Julia\\Desktop\\table-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Julia\\Desktop\\table-test\\node_modules\\babel-loader\\lib\\index.js","mtime":315536400000},{"path":"C:\\Users\\Julia\\Desktop\\table-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Julia\\Desktop\\table-test\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgbWFwTXV0YXRpb25zLAp9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBIVFRQIH0gZnJvbSAnQC9wbHVnaW5zL2h0dHAtY29tbW9uJzsKaW1wb3J0IEluZm9UYWJsZSBmcm9tICcuLi9UYWJsZSc7CiAgZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0RpYWxvZycsCiAgICBjb21wb25lbnRzOiB7CiAgICAgIEluZm9UYWJsZSwKICAgIH0sCiAgICBwcm9wczogewogICAgICByb3dEZXRhaWxzOiB7CiAgICAgICAgdHlwZTogT2JqZWN0LAogICAgICAgIGRlZmF1bHQ6ICgpID0+IG51bGwsCiAgICAgIH0sCiAgICAgIG1vZGFsOiB7CiAgICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgICBkZWZhdWx0OiAoKSA9PiBmYWxzZSwKICAgICAgfSwKICAgIH0sCiAgICBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIHZlcnNpb246ICcnLAogICAgICAgIGhlYWRlcnM6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgdGV4dDogJ1BhY2thZ2UnLAogICAgICAgICAgICBhbGlnbjogJ3N0YXJ0JywKICAgICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgICAgIHZhbHVlOiAnbmFtZScsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB0ZXh0OiAnUGFja2FnZSBUeXBlJywKICAgICAgICAgICAgdmFsdWU6ICd0eXBlJywKICAgICAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGV4dDogJ0ZpbGVzIEluY2x1ZGVzJywKICAgICAgICAgICAgdmFsdWU6ICdmaWxlcycsCiAgICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHRleHQ6ICdTaXplJywKICAgICAgICAgICAgdmFsdWU6ICdzaXplJywKICAgICAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGV4dDogJ1RpbWUnLAogICAgICAgICAgICB2YWx1ZTogJ3RpbWUnLAogICAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgZmlsZXM6IFtdLAogICAgICAgIGJhZGdlOiAnJywKICAgICAgfQogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgIG1vZGFsKCkgewogICAgICAgIGlmICh0aGlzLm1vZGFsKSB7CiAgICAgICAgICB0aGlzLnZlcnNpb24gPSB0aGlzLnJvd0RldGFpbHM/LmxhdGVzdFZlcnNpb247CiAgICAgICAgICB0aGlzLmdldEZpbGVzKHRoaXMucm93RGV0YWlscyk7CiAgICAgICAgfQogICAgICB9LAogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgIHJvd05hbWUoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucm93RGV0YWlscz8ubmFtZTsKICAgICAgfSwKICAgICAgdmVyc2lvbnMoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucm93RGV0YWlscz8udmVyc2lvbnM7CiAgICAgIH0sCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAuLi5tYXBNdXRhdGlvbnMoWydzZXRTcGlubmVyJywgJ3NldFNuYWNrQmFyJ10pLAogICAgICBhc3luYyBnZXRGaWxlcyhyb3cpIHsKICAgICAgICB0aGlzLnNldFNwaW5uZXIodHJ1ZSk7CiAgICAgICAgaWYgKHJvdykgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgeyBuYW1lLCB0eXBlIH0gPSByb3c7CiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgSFRUUC5nZXQoYCR7dHlwZX0vJHtuYW1lfUAke3RoaXMudmVyc2lvbn1gKTsKICAgICAgICAgICAgaWYgKCF0aGlzLmJhZGdlKSB7CiAgICAgICAgICAgICAgdGhpcy5nZXRCYWRnZSh0eXBlLCBuYW1lKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmZpbGVzID0gZGF0YS5maWxlczsKICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0RmlsZXMnLCBlcnIpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdGhpcy5zZXRTcGlubmVyKGZhbHNlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFzeW5jIGdldEJhZGdlKHR5cGUsIG5hbWUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgYmFkZ2UgPSBhd2FpdCBIVFRQLmdldChgJHt0eXBlfS8ke25hbWV9L2JhZGdlP3N0eWxlPXJvdW5kZWRgKTsKICAgICAgICAgIHRoaXMuYmFkZ2UgPSBiYWRnZS5kYXRhOwogICAgICAgIH0gY2F0Y2goZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0QmFkZ2UnLCBlcnIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgY2xvc2VNb2RhbCgpIHsKICAgICAgICB0aGlzLmZpbGVzID0gW107CiAgICAgICAgdGhpcy5iYWRnZSA9ICcnOwogICAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlVGFibGVEaWFsb2cnKTsKICAgICAgfSwKICAgIH0sCiAgfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Dialog","sourcesContent":["<template>\n  <v-dialog\n    v-model=\"modal\"\n    persistent\n    transition=\"dialog-bottom-transition\"\n    max-width=\"780\"\n    class=\"main-dialog\">\n    <template>\n      <v-card>\n        <v-toolbar\n          color=\"indigo lighten-1\"\n          dark>\n          Table Info\n          <v-spacer></v-spacer>\n          <div\n            v-html=\"badge\"\n            class=\"d-flex mr-5\"/>\n          {{ rowName }}\n        </v-toolbar>\n        <v-card-text>\n          <v-select\n            v-model=\"version\"\n            :items=\"versions\"\n            append-outer-icon=\"mdi-form-select\"\n            menu-props=\"auto\"\n            hide-details\n            label=\"Choose Version\"\n            single-line\n            @input=\"getFiles(rowDetails)\"/>\n          <div\n            class=\"mt-10\">\n            <InfoTable\n              :headers=\"headers\"\n              :items=\"files\"\n              :limit=\"4\"/>\n          </div>\n        </v-card-text>\n        <v-card-actions class=\"justify-end\">\n          <v-btn\n            text\n            @click=\"closeModal\">\n            Close\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </template>\n  </v-dialog>\n</template>\n\n<script>\nimport {\n  mapMutations,\n} from 'vuex';\nimport { HTTP } from '@/plugins/http-common';\nimport InfoTable from '../Table';\n  export default {\n    name: 'Dialog',\n    components: {\n      InfoTable,\n    },\n    props: {\n      rowDetails: {\n        type: Object,\n        default: () => null,\n      },\n      modal: {\n        type: Boolean,\n        default: () => false,\n      },\n    },\n    data() {\n      return {\n        version: '',\n        headers: [\n          {\n            text: 'Package',\n            align: 'start',\n            sortable: true,\n            value: 'name',\n          },\n          {\n            text: 'Package Type',\n            value: 'type',\n            sortable: false,\n          },\n          {\n            text: 'Files Includes',\n            value: 'files',\n            sortable: false,\n          },\n          {\n            text: 'Size',\n            value: 'size',\n            sortable: false,\n          },\n          {\n            text: 'Time',\n            value: 'time',\n            sortable: false,\n          },\n        ],\n        files: [],\n        badge: '',\n      }\n    },\n    watch: {\n      modal() {\n        if (this.modal) {\n          this.version = this.rowDetails?.latestVersion;\n          this.getFiles(this.rowDetails);\n        }\n      },\n    },\n    computed: {\n      rowName() {\n        return this.rowDetails?.name;\n      },\n      versions() {\n        return this.rowDetails?.versions;\n      },\n    },\n    methods: {\n      ...mapMutations(['setSpinner', 'setSnackBar']),\n      async getFiles(row) {\n        this.setSpinner(true);\n        if (row) {\n          try {\n            const { name, type } = row;\n            const { data } = await HTTP.get(`${type}/${name}@${this.version}`);\n            if (!this.badge) {\n              this.getBadge(type, name);\n            }\n            this.files = data.files;\n          } catch (err) {\n            console.log('getFiles', err);\n          } finally {\n            this.setSpinner(false);\n          }\n        }\n      },\n      async getBadge(type, name) {\n        try {\n          const badge = await HTTP.get(`${type}/${name}/badge?style=rounded`);\n          this.badge = badge.data;\n        } catch(err) {\n          console.log('getBadge', err);\n        }\n      },\n      closeModal() {\n        this.files = [];\n        this.badge = '';\n        this.$emit('closeTableDialog');\n      },\n    },\n  }\n</script>\n"]}]}